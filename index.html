<!DOCTYPE html>
<html>
<head>
<title>High Graphics Car Racing Game</title>
<style>
body { margin:0; font-family:Arial; background:black; color:white; text-align:center; }
canvas { background:#555; display:none; margin:auto; }
button { padding:12px 20px; margin:10px; font-size:18px; }
#menu, #settings, #mapSelect { display:block; }
</style>
</head>
<body>

<h1>üèéÔ∏è Ultimate Car Racing</h1>

<div id="menu">
  <button onclick="startGame()">Start Game</button>
  <button onclick="openMap()">Choose Place</button>
  <button onclick="openSettings()">Settings</button>
</div>

<div id="mapSelect" style="display:none;">
  <h2>Select Track</h2>
  <button onclick="selectMap(1)">City</button>
  <button onclick="selectMap(2)">Desert</button>
  <button onclick="backToMenu()">Back</button>
</div>

<div id="settings" style="display:none;">
  <h2>Settings</h2>
  <p>Graphics: High</p>
  <p>Sound: On</p>
  <button onclick="backToMenu()">Back</button>
</div>

<canvas id="game" width="360" height="600"></canvas>
<h2 id="info"></h2>

<script>
let canvas = document.getElementById("game");
let ctx = canvas.getContext("2d");

let car = { x:160, y:500, w:40, h:80 };
let enemy = { x:160, y:-100, w:40, h:80 };
let score = 0;
let level = 1;
let speed = 4;
let gameRunning = false;
let map = 1;

function openMap(){
  document.getElementById("menu").style.display="none";
  document.getElementById("mapSelect").style.display="block";
}

function openSettings(){
  document.getElementById("menu").style.display="none";
  document.getElementById("settings").style.display="block";
}

function backToMenu(){
  document.getElementById("menu").style.display="block";
  document.getElementById("settings").style.display="none";
  document.getElementById("mapSelect").style.display="none";
}

function selectMap(m){
  map = m;
  alert("Map Selected!");
  backToMenu();
}

function startGame(){
  document.getElementById("menu").style.display="none";
  canvas.style.display="block";
  score = 0;
  level = 1;
  speed = 4;
  enemy.y = -100;
  gameRunning = true;
  gameLoop();
}

document.addEventListener("keydown", function(e){
  if(e.key=="ArrowLeft" && car.x>0) car.x -= 20;
  if(e.key=="ArrowRight" && car.x<320) car.x += 20;
});

function drawRoad(){
  if(map==1) ctx.fillStyle="#444";
  if(map==2) ctx.fillStyle="#C2B280";
  ctx.fillRect(0,0,360,600);
}

function drawCar(){
  ctx.fillStyle="red";
  ctx.fillRect(car.x, car.y, car.w, car.h);
}

function drawEnemy(){
  ctx.fillStyle="yellow";
  ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);
}

function gameLoop(){
  if(!gameRunning) return;

  drawRoad();
  drawCar();
  drawEnemy();

  enemy.y += speed;

  if(enemy.y > 600){
    enemy.y = -100;
    enemy.x = Math.random()*300;
    score++;
    if(score % 5 == 0){
      level++;
      speed += 1;
    }
  }

  if(
    car.x < enemy.x + enemy.w &&
    car.x + car.w > enemy.x &&
    car.y < enemy.y + enemy.h &&
    car.y + car.h > enemy.y
  ){
    gameOver();
    return;
  }

  document.getElementById("info").innerText = "Score: " + score + " | Level: " + level;

  requestAnimationFrame(gameLoop);
}

function gameOver(){
  gameRunning = false;
  alert("Game Over!\nScore: " + score + "\nLevel: " + level);
  backToMenu();
}
</script>

</body>
</html>
