 road = new THREE.Mesh(new THREE.PlaneGeometry(10, 1000), new THREE.MeshStandardMaterial({color: 0x444444}));
            road.rotation.x = -Math.PI / 2;
            scene.add(road);

            // Real Player Character
            player = createHumanoid(0x0000ff); // Blue Warrior
            scene.add(player);

            // Add Enemies (Villains)
            for(let i = 1; i < 15; i++) {
                createEnemy(-40 * i);
                createGate(-25 * i);
            }

            camera.position.set(0, 6, 10);
            animate();
        }

        function createEnemy(z) {
            const villain = createHumanoid(0xff0000); // Red Villain
            villain.position.set(Math.random() * 6 - 3, 0, z);
            scene.add(villain);
            enemies.push(villain);
        }

        function createGate(z) {
            const gateGeo = new THREE.BoxGeometry(4, 3, 0.2);
            const gateMat = new THREE.MeshStandardMaterial({ color: 0x00ff00, transparent: true, opacity: 0.5 });
            const gate = new THREE.Mesh(gateGeo, gateMat);
            gate.position.set(Math.random() * 4 - 2, 1.5, z);
            gate.userData = { value: 2 };
            scene.add(gate);
            gates.push(gate);
        }

        function animate() {
            if (!isStarted) return;
            requestAnimationFrame(animate);

            player.position.z -= 0.25;
            player.position.x += (moveX - player.position.x) * 0.1;
            camera.position.z = player.position.z + 10;
            camera.lookAt(player.position.x, 1, player.position.z - 5);

            // Logic for Gates
            gates.forEach((gate, i) => {
                if (player.position.distanceTo(gate.position) < 2) {
                    score *= gate.userData.value;
                    document.getElementById('score').innerText = score;
                    scene.remove(gate);
                    gates.splice(i, 1);
                }
            });

            // Logic for Villains
            enemies.forEach((en, i) => {
                if (player.position.distanceTo(en.position) < 1.5) {
                    score -= 5; // Dushman se takrane par army kam hogi
                    document.getElementById('score').innerText = Math.max(0, score);
                    scene.remove(en);
                    enemies.splice(i, 1);
                }
            });

            if(score <= 0) { alert("Game Over! Villains Won!"); location.reload(); }
            renderer.render(scene, camera);
        }

        window.addEventListener('touchmove', e => moveX = ((e.touches[0].clientX/window.innerWidth)*2-1)*4);
        window.addEventListener('mousemove', e => moveX = ((e.clientX/window.innerWidth)*2-1)*4);
    </script>
</body>
</html>
